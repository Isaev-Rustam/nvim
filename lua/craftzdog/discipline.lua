local M = {}

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞–≤–∏—à
function M.cowboy()
    ---@type table?
    local ok = true -- –§–ª–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    for _, key in ipairs({ "h", "j", "k", "l", "+", "-" }) do -- –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–ª–∞–≤–∏—à
        local count = 0 -- –°—á–µ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π
        local timer = assert(vim.uv.new_timer()) -- –°–æ–∑–¥–∞–µ–º —Ç–∞–π–º–µ—Ä
        local map = key -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –∫–ª–∞–≤–∏—à—É
        vim.keymap.set("n", key, function()
            if vim.v.count > 0 then -- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∏—Å–ª–æ–≤–æ–π –ø—Ä–µ—Ñ–∏–∫—Å, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
                count = 0
            end
            if count >= 10 and vim.bo.buftype ~= "nofile" then -- –ï—Å–ª–∏ –∫–ª–∞–≤–∏—à–∞ –Ω–∞–∂–∞—Ç–∞ –±–æ–ª–µ–µ 10 —Ä–∞–∑
                ok = pcall(vim.notify, "–ü–æ–ª–µ–≥—á–µ, –∫–æ–≤–±–æ–π!", vim.log.levels.WARN, { -- –í—ã–≤–æ–¥–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
                    icon = "ü§†", -- –ò–∫–æ–Ω–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                    id = "cowboy", -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                    keep = function()
                        return count >= 10 -- –£–¥–µ—Ä–∂–∏–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –ø–æ–∫–∞ —Å—á–µ—Ç—á–∏–∫ >= 10
                    end,
                })
                if not ok then -- –ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏—à—É
                    return map
                end
            else
                count = count + 1 -- –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
                timer:start(2000, 0, function() -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                    count = 0
                end)
                return map -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏—à—É
            end
        end, { expr = true, silent = true }) -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞—Ä—Ç—É –∫–ª–∞–≤–∏—à
    end
end

return M
